!call "Шаблон профиля" parameters all!hotspot 0,0,0!if not(show) then end!success = LIBRARYGLOBAL ("Libraryflobals-km", "mat_by_type_code", mat_by_type_code)!is_mat_set = 0!if (show_spec or type_spec = "Не специфицировать") and not(is_mat_set) and mat_by_type_code<>1 then!	ignore_mat = 0!	success = LIBRARYGLOBAL ("Libraryflobals-km", "ignore_mat", ignore_mat)!	col_mat = ignore_mat!	is_mat_set = 1!endif!if mat_by_type_code<>1 and not(is_mat_set) then!	if mat_by_type_code=2 then !		name_mat_arr = "cov_mat_arr"!		inx_mat = cov_mat!	endif!	if mat_by_type_code=3 then!		name_mat_arr = "fire_keep_mat_arr"!		inx_mat = fire_keep_mat!	endif!	if mat_by_type_code=4 then!		name_mat_arr = "konstr_mat_arr"!		inx_mat = type_mat!	endif!	if mat_by_type_code=5 then!		name_mat_arr = "fire_mat_arr"!		inx_mat = fire_mat!	endif!	if mat_by_type_code=6 then!		name_mat_arr = "stal_mat_arr"!		inx_mat = stal_mat!	endif!	if mat_by_type_code=7 then!		name_mat_arr = "type_spec_mat_arr"!		inx_mat = type_spec_mat!	endif!	if mat_by_type_code=8 then!		name_mat_arr = "connect_mat_arr"!		inx_mat = upr_mat!	endif!	if inx_mat=99 or inx_mat<1 then !		col_mat = 0!	else!		dim cov_mat_arr[]!		success = LIBRARYGLOBAL ("Libraryflobals-km", name_mat_arr, cov_mat_arr)!		col_mat = cov_mat_arr[inx_mat]!	endif!	is_mat_set = 1!endif!pen gs_cont_pen!material col_mat!if gs_shadow=0 then!	shadow off!else!	shadow on!endif