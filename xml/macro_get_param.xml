<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="false" IsPlaceable="false" MainGUID="7E78907B-4B76-4507-B54E-F469D8A39C4D" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="38">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>103E8D2C-8230-42E1-9597-46F84CCE28C0</MainGUID>
	<MainGUID>B2970E4C-8680-4061-8670-2F4B638F3953</MainGUID>
</Ancestry>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
</CalledMacros>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
param_name_str = ""
unit_name_str = ""
unstr="%.0"
EPS = 0.0001
gl_id=""

dim	parentPropertiesArray[]
n = request ("Properties_Of_Parent", "", parentPropertiesArray)

mgp_in_str_t = mgp_in_str
2:
n_sh = STRSTR(mgp_in_str_t, "%", 1)
if n_sh>0 then
	in_str = mgp_in_str_t : gosub "get_param_name"
	if param_name_str <> "" then
		var_param = ""
		if STRSTR("%"+param_name_str+"%","%id%",0)>0 then var_param = gl_id
		if STRSTR("%"+param_name_str+"%","%pr1%",0)>0 then var_param = mgp_prim1
		if STRSTR("%"+param_name_str+"%","%pr2%",0)>0 then var_param = mgp_prim2
		if STRSTR("%"+param_name_str+"%","%pr3%",0)>0 then var_param = mgp_prim3
		if STRSTR("%"+param_name_str+"%","%pr4%",0)>0 then var_param = mgp_prim4
		if STRSTR("%"+param_name_str+"%","%pr5%",0)>0 then var_param = mgp_prim5
		if var_param = "" then
			if STRSTR(param_name_str,"qty_v",0)>0 then
				if qty>EPS then
					var_param = STR ("%.0", qty)+"шт."
				else
					var_param = ""
				endif
			else
				nd1 = request("Assoclp_parvalue", param_name_str, namindd1, typed1, flagd1, dim1d1, dim2d1, var_param)
				if nd1=6 then
					if STRLEN(unit_name_str)>0 then 
						unstr = "%" + unit_name_str
					else
						unstr = mgp_ld
					endif
					if vartype(var_param)=1 then var_param = STR (unstr, var_param)
				else
					var_param = STRTOLOWER(var_param)
					for i=1 to vardim1(parentPropertiesArray) step 4
						if i+3<=vardim1(parentPropertiesArray) then
							PropertyName = parentPropertiesArray[i+3]
							id = parentPropertiesArray[i]
							if var_param = STRTOLOWER(PropertyName) or var_param = STRTOLOWER(id) then
								_stPropertyValue = "Нет"
								_stPropertyID = id
								gosub "getPropertyValue"
								var_param = _stPropertyValue
							endif
						endif
					next i
				endif
			endif
		endif
		find_str = "%" + param_name_str + unit_name_str + "%"
		replace_str = var_param
		gosub "str_replace"
		mgp_in_str_t = out_str
		goto 2
	endif
endif

goto "m_end"

"get_param_name":
	param_name_str = ""
	unit_name_str = ""
	start_find = STRSTR(in_str, "%", 1)
	if start_find > 0 then
		len_in_str = STRLEN (in_str)
		chapt_1 = STRSUB(in_str, start_find+1, len_in_str)
		start_find_2 = STRSTR(chapt_1, "%", 1)
		if start_find_2 > 0 then
			param_name_str = STRSUB(chapt_1, 1, start_find_2-1)
		endif
	endif
	start_find = STRSTR(param_name_str, ".", 1)
	if STRLEN(param_name_str)>0 and start_find then
		len_in_str = STRLEN(param_name_str)
		unit_name_str = STRSUB(param_name_str, start_find, len_in_str)
		param_name_str = STRSUB(param_name_str, 1, start_find-1)
	endif
return

"str_replace":
	if vartype(in_str) = 2 and vartype(find_str) = 2 and vartype(replace_str) = 2 then
		out_str = ""
		start_find = STRSTR(in_str, find_str, 1)
		if start_find > 0 then
			len_in_str = STRLEN (in_str)
			len_find_str = STRLEN (find_str)
			len_replace_str = STRLEN (replace_str)
			chapt_1 = STRSUB(in_str, 1, start_find-1)
			chapt_2 = STRSUB(in_str, start_find+len_find_str, len_in_str)
			out_str = chapt_1 + replace_str + chapt_2
		else
			out_str = in_str
		endif
	endif
return

"getPropertyValue":
	_stPropertyValue = ""
	dim	propertyValues[]
	m = REQUEST ("Property_Value_Of_Parent", _stPropertyID, _typeValue, dim1, dim2, propertyValues)
	if m > 3 then
		for j = 1 to vardim1(propertyValues)
			if j > 1 then
				_stPropertyValue = _stPropertyValue + "; "
			endif
			if _typeValue = 4 then
				_stPropertyValue = _stPropertyValue + propertyValues[j]
			else
				if _typeValue = 3 then
					_stPropertyValue = _stPropertyValue + str ("%.2", propertyValues[j])
				else
					if _typeValue = 2 then
						_stPropertyValue = _stPropertyValue + str ("%.0", propertyValues[j])
					else
						if propertyValues[j] > 0 then
							_stPropertyValue = _stPropertyValue + `ИСТИНА`
						else
							_stPropertyValue = _stPropertyValue + `ЛОЖЬ`
						endif
					endif
				endif
			endif
		next j
	endif
return

"m_end":
mgp_out_str = mgp_in_str_t
parameters mgp_out_str=mgp_out_str
EXIT mgp_out_str
]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_VL>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_FWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_FWM>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_BWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_BWM>

<ParamSection SectVersion="26" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<Version>26</Version>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_FixSize/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
		<SymbolColor>0</SymbolColor>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA["Размер 1"]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA["Размер 2"]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Length Name="ZZYZX">
			<Description><![CDATA["Высота"]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Boolean Name="AC_show2DHotspotsIn3D">
			<Description><![CDATA["Показ Узловых 2D Точек в 3D"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Boolean>
		<Length Name="ac_bottomlevel">
			<Description><![CDATA["Отметка Низа"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Length>
		<Length Name="ac_toplevel">
			<Description><![CDATA["Отметка Верха"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>

		<!-- _sp0_A: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="_sp0_A">
			<Description><![CDATA["Входные параметры"]]></Description>
		</Title>
		<String Name="mgp_in_str">
			<Description><![CDATA["Шаблон строки"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="mgp_prim1">
			<Description><![CDATA["Примечание 1"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="mgp_prim2">
			<Description><![CDATA["Примечание 2"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="mgp_prim3">
			<Description><![CDATA["Примечание 3"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="mgp_prim4">
			<Description><![CDATA["Примечание 4"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="mgp_prim5">
			<Description><![CDATA["Примечание 5"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
		<Integer Name="mgp_qty">
			<Description><![CDATA["Количество"]]></Description>
			<Value>0</Value>
		</Integer>
		<String Name="mgp_ld">
			<Description><![CDATA["Размернсть в формате %.unit"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>

		<!-- macro_get__A: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="macro_get__A">
			<Description><![CDATA["Выходные параметры"]]></Description>
		</Title>
		<String Name="mgp_out_str">
			<Description><![CDATA[""]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
	</Parameters>
</ParamSection>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author></Author>
	<License>
		<Type>CC0</Type>
		<Version>1.0</Version>
	</License>
</Copyright>

<Keywords SectVersion="1" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Keywords>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

</Symbol>
